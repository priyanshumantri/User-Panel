<%- include("../../includes/header", {pageName : "role" }) %>
    <%- include("../../includes/sidebar", {pageName : "manageRoles" }) %>
        <%- include("../../includes/toolbar", {pageName : "role" , pageHead : "Edit Permissions" }) %>

            <div id="kt_app_content" class="app-content  flex-column-fluid ">
                <div id="kt_app_content_container" class="app-container  container-xxl ">
                    <!--begin::Card-->
                    <div class="card" style="padding: 30px;">
                        <!--begin::Card header-->

                        <form id="updateRoleForm" action="/user-management/roles/edit" method="POST">
                            <div class="border-0 pt-6">
                                
                                <div class="fv-row">
                                    <!--begin::Label-->
                                    <label class="fs-5 fw-bold form-label mb-2">Role Permissions</label>
                                    <!--end::Label-->

                                    <!--begin::Table wrapper-->
                                    <div class="table-responsive">
                                        <!--begin::Table-->
                                        <table class="table align-middle table-row-dashed fs-6 gy-5">
                                            <!--begin::Table body-->
                                            <tbody class="text-gray-600 fw-semibold">
                                                <!--begin::Table row-->
                                                <tr>
                                                    <td class="text-gray-800">
                                                        Administrator Access

                                                        <span class="ms-2" data-bs-toggle="popover"
                                                            data-bs-trigger="hover" data-bs-html="true"
                                                            data-bs-content="Allows a full access to the system"
                                                            data-kt-initialized="1">
                                                            <i class="ki-duotone ki-information fs-7"><span
                                                                    class="path1"></span><span
                                                                    class="path2"></span><span
                                                                    class="path3"></span></i> </span>
                                                    </td>
                                                    <td>
                                                        <!--begin::Checkbox-->
                                                        <label
                                                            class="form-check form-check-custom form-check-solid me-9">
                                                            <input class="form-check-input" type="checkbox" value=""
                                                                id="selectAll">
                                                            <span class="form-check-label"
                                                                for="kt_roles_select_all">
                                                                Select all
                                                            </span>
                                                        </label>
                                                        <!--end::Checkbox-->
                                                    </td>
                                                </tr>
                                                <!--end::Table row-->
                                                <!--begin::Table row-->
                                                <input type="hidden" name="roleID" value="<%=roleData.id%>">
                                <% permissionData.forEach((data)=> {%>




                                                    <tr>
                                                        <!--begin::Label-->
                                                        <td class="text-gray-800">

                                                            <%=data.permissionName%>
                                                            <input type="hidden" name="permission"
                                                                value="<%=data.id%>">
                                                        </td>

                                                        <!--end::Label-->

                                                        <!--begin::Options-->
                                                        <td>
                                                            <!--begin::Wrapper-->
                                                            <div class="d-flex">
                                                                <!--begin::Checkbox-->
                                                                <label
                                                                    class="form-check form-check-sm form-check-custom form-check-solid me-5 me-lg-20">

                                                                    
                                                                <% var settings = roleData.permissions.find((permission) => permission.permissionID == data.id); %>
                                                                


                                                                    <input class="form-check-input checkbox-items" type="checkbox"
                                                                        value="<%=data.id%>" name="read" <% if(settings && settings.canRead === true) {%> checked <%} %>>
                                                                    <span class="form-check-label">
                                                                        Read
                                                                    </span>
                                                                </label>
                                                                <!--end::Checkbox-->

                                                                <!--begin::Checkbox-->
                                                                <label
                                                                    class="form-check form-check-sm form-check-custom form-check-solid me-5 me-lg-20">
                                                                    <input class="form-check-input checkbox-items" type="checkbox"
                                                                        value="<%=data.id%>" name="write" <% if(settings && settings.canWrite === true) {%> checked <%} %>>
                                                                    <span class="form-check-label">
                                                                        Write
                                                                    </span>
                                                                </label>
                                                                <!--end::Checkbox-->

                                                                <!--begin::Checkbox-->
                                                                <label
                                                                    class="form-check form-check-sm form-check-custom form-check-solid me-5 me-lg-20">
                                                                    <input class="form-check-input checkbox-items" type="checkbox"
                                                                        value="<%=data.id%>" name="create" <% if(settings && settings.canCreate === true) {%> checked <%} %>>
                                                                    <span class="form-check-label">
                                                                        Create
                                                                    </span>
                                                                </label>
                                                                <!--end::Checkbox-->

                                                                <!--begin::Checkbox-->
                                                                <label
                                                                class="form-check form-check-sm form-check-custom form-check-solid me-5 me-lg-20">
                                                                    <input class="form-check-input checkbox-items" type="checkbox"
                                                                        value="<%=data.id%>" name="delete" <% if(settings && settings.canDelete === true) {%> checked <%} %>>
                                                                    <span class="form-check-label">
                                                                        Delete
                                                                    </span>
                                                                </label>

                                                                <label
                                                                class="form-check form-check-sm form-check-custom form-check-solid">
                                                                <input class="form-check-input checkbox-items" type="checkbox"
                                                                    value="<%=data.id%>" name="export" <% if(settings && settings.canExport === true) {%> checked <%} %>>
                                                                <span class="form-check-label">
                                                                    Export
                                                                </span>
                                                            </label>
                                                                <!--end::Checkbox-->
                                                            </div>
                                                            <!--end::Wrapper-->
                                                        </td>
                                                        <!--end::Options-->
                                                    </tr>



                                               

                                    <%}) %>
                                </tbody>
                                <!--end::Table body-->
                            </table>
                            <!--end::Table-->
                        </div>
                        <!--end::Table wrapper-->
                    </div>
                                        <button type="button" onclick="updateRole()"
                                            class="btn btn-primary btn-active-light-primary my-1">UPDATE</button>



                                        <!--end::Card header-->
                            </div>
                        </form>
                        <!--end::Card-->
                    </div>
                    <!--end::Content container-->
                </div>
            </div>


            <%- include("../../includes/footer", {pageName : "role" }) %>